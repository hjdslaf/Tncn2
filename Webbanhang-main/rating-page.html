<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style>
        :root {
            --primary-color: #4CAF50;
            --light-gray: #ccc;
            --star-color: gold;
            --hover-color: orange;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h1 {
            text-align: center;
        }

        h2 {
            color: var(--primary-color);
        }

        .rating-section, .reviews-section {
            margin-bottom: 20px;
        }

        .star-rating {
            direction: rtl;
            display: inline-block;
            font-size: 2rem;
            color: var(--light-gray);
        }

        .star {
            cursor: pointer;
        }

        .star:hover,
        .star:hover ~ .star {
            color: var(--hover-color);
        }

        textarea {
            width: 100%;
            margin-top: 10px;
            height: 100px;
            padding: 10px;
        }

        button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
        }

        .reviews-section {
            margin-top: 20px;
        }

        .review {
            border: 1px solid #ddd;
            padding: 10px;
            margin-top: 10px;
        }

        .review div {
            margin-bottom: 5px;
        }

        .product-image {
            width: 100%;
            max-width: 400px;
            margin: 10px auto;
            display: block;
        }

        /* CSS cho nút "Về trang chủ" */
        .back-home {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 15px;
            background-color: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .back-home:hover {
            background-color: darkgreen; /* Màu khi di chuột qua */
        }
    </style>
</head>
<body>

    <!-- Nút về trang chủ -->
    <a href="index.html" class="back-home">Về trang chủ</a>

    

    <!-- Hiển thị thông tin món ăn -->
    <h2 id="product-title">Tên món ăn</h2>
    <img id="product-img" class="product-image" src="" alt="Product Image">

    <!-- Màn hình đánh giá -->
    <div class="rating-section">
        <h2>Đánh giá món ăn</h2>
        <div class="star-rating">
            <span class="star" data-value="5">&#9733;</span>
            <span class="star" data-value="4">&#9733;</span>
            <span class="star" data-value="3">&#9733;</span>
            <span class="star" data-value="2">&#9733;</span>
            <span class="star" data-value="1">&#9733;</span>
        </div>

        <textarea id="comment" placeholder="Viết bình luận của bạn ở đây..."></textarea>
        <button id="upload-review">Upload</button>
    </div>

    <!-- Hiển thị đánh giá của người khác -->
    <div class="reviews-section">
        <h2>Đánh giá từ người khác</h2>
        <div id="reviews-container">
            <!-- Các 
                 sẽ hiển thị ở đây -->
        </div>
    </div>

    <script>
        // Lấy danh sách sản phẩm từ localStorage
        const products = JSON.parse(localStorage.getItem('products')) || [];

        // Lấy ID món ăn từ URL
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('product');

        // Tìm món ăn dựa trên ID từ URL
        const product = products.find(p => p.id == productId);

        if (product) {
            // Hiển thị thông tin món ăn
            document.getElementById('product-title').textContent = product.title;
            document.getElementById('product-img').src = product.img; // Cập nhật hình ảnh
        }

        // Hiển thị đánh giá khi trang được tải
        displayReviews();

        function displayReviews() {
    const reviewsContainer = document.getElementById('reviews-container');
    const reviews = JSON.parse(localStorage.getItem('reviews')) || []; // Lấy danh sách đánh giá

    reviewsContainer.innerHTML = ''; // Xóa nội dung cũ

    reviews.forEach(review => {
        const newReview = `
            <div class="review">
                <div>Đánh giá: ${'&#9733;'.repeat(review.rating)} (${review.rating} sao)</div>
                <div>Bình luận: ${review.comment}</div>
            </div>`;
        reviewsContainer.innerHTML += newReview; // Thêm đánh giá vào container
    });
}
window.onload = function() {
    // Hiển thị đánh giá khi trang được tải
    displayReviews();

     // Xử lý chọn ngôi sao
    document.querySelectorAll('.star').forEach(star => {
        star.addEventListener('click', selectStar);
    });

    function selectStar(event) {
        const value = event.target.getAttribute('data-value');
        document.querySelectorAll('.star').forEach(star => {
            star.style.color = star.getAttribute('data-value') <= value ? 'var(--star-color)' : 'var(--light-gray)';
        });
        localStorage.setItem('selectedRating', value);
    }

    // Xử lý upload đánh giá
    document.getElementById('upload-review').addEventListener('click', () => {
        const comment = document.getElementById('comment').value;
        const rating = localStorage.getItem('selectedRating') || 0;

        if (rating > 0 && comment.trim() !== "") {
            const reviews = JSON.parse(localStorage.getItem('reviews')) || []; // Lấy danh sách đánh giá
            reviews.push({ rating: rating, comment: comment }); // Thêm đánh giá mới vào danh sách

            localStorage.setItem('reviews', JSON.stringify(reviews)); // Lưu lại vào localStorage

            displayReviews(); // Hiển thị đánh giá

            // Xóa bình luận và đánh giá sau khi upload
            document.getElementById('comment').value = '';
            localStorage.removeItem('selectedRating');
            document.querySelectorAll('.star').forEach(star => star.style.color = 'var(--light-gray)');
        } else {
            alert("Hãy chọn đánh giá và viết bình luận!");
        }
    });

}
    </script>

    <!-- Link Font Awesome để hiển thị các icon sao -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</body>
</html>